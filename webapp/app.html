<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<meta name="description" content="" />
		<title>COVID-19 X-Ray Diagnosis</title>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
		<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
		<script type="text/javascript">
			function decodeAndSend() {
				var selectedFiles = document.getElementById('inputFileToLoad').files;
				if (selectedFiles.length > 0) {
					var fileToLoad = selectedFiles[0];
					var fileReader = new FileReader();

					fileReader.onload = function(fileLoadedEvent) {
						var srcBase64 = fileLoadedEvent.target.result; // <--- data: base64
						$('#xray-placeholder').css('background-image', "url('" + srcBase64 + "')");
						console.log('Converted Base64 version is ' + srcBase64);

						url = 'https://europe-west3-super-hackthecrisis.cloudfunctions.net/classification';
						$.ajax({
							type: 'POST',
							url: url,
							data: srcBase64,
							dataType: 'text',
							crossDomain: true,
							success: function(res) {
								alert(res);
								console.log(res);
							}
						});
					};
					fileReader.readAsDataURL(fileToLoad);
				}
			}
		</script>
		<style>
			.bd-placeholder-img {
				font-size: 1.125rem;
				text-anchor: middle;
				-webkit-user-select: none;
				-moz-user-select: none;
				-ms-user-select: none;
				user-select: none;
			}

			@media (min-width: 768px) {
				.bd-placeholder-img-lg {
					font-size: 3.5rem;
				}
			}

			html {
				font-size: 14px;
			}

			@media (min-width: 768px) {
				html {
					font-size: 16px;
				}
			}

			.container {
				max-width: 960px;
			}

			.card-deck .card {
				min-width: 220px;
			}

			.card > img {
				height: 40vh;
			}

			.card-deck,
			#cardcontainer {
				width: 98% !important;
			}

			h1.onehead {
				font-size: 3rem;
				font-weight: 600;
			}

			.card-text {
				font-size: 1.3rem;
			}

			#xray-placeholder {
				background-image: url('./xray-image-unsplash.jpg');
				background-size: cover;
				background-position: center center;
			}

			#content {
				min-height: 80vh;
			}

			.card-header {
				background-color: rgba(0, 0, 0, 0.7);
				height: 40vh;
			}
		</style>
	</head>

	<body>
		<div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
			<h5 class="my-0 mr-md-auto font-weight-normal">COVID-19 AI Diagnosis</h5>
			<!-- <nav class="my-2 my-md-0 mr-md-3"> -->
			<!-- <a class="p-2 text-dark" href="#">Features</a>
			<a class="p-2 text-dark" href="#">Enterprise</a>
			<a class="p-2 text-dark" href="#">Support</a>
			<a class="p-2 text-dark" href="#">Pricing</a> -->
			<!-- </nav> -->
			<!-- <a class="btn btn-outline-primary" href="#">Sign up</a> -->
		</div>

		<div class="container-fluid w-100 d-flex justify-content-center align-items-center" id="content">
			<!-- <div class="card-deck"> -->
			<div class="row" id="cardcontainer">
				<div class="col-xl-6 mb-4">
					<div class="card border-0">
						<div class="card-body px-4">
							<h1 class="onehead mb-4">
								Use AI to scan your patients X&#8209;rays for COVID&#8209;19
							</h1>
							<p class="card-text">
								We prototyped an algorithm that has been trained with x-ray pictures from people who have been detected positive for Covid19 and people that are healthy. It is a simple classification task. The aim is to be able to classify people accordingly by feeding in x-rays of their chests. Of course, this is not the only solution approach. There are many other possible ways of using existing infrastructure such as MRT for example or not focusing just on x-rays of the chest.
							</p>
						</div>
					</div>
				</div>
				<div class="col-xl-6 mb-4">
					<div class="card">
						<div class="card-header d-flex flex-column justify-content-center align-items-center" id="xray-placeholder">
							<!-- <div class="card-img-overlay text-white d-flex flex-column justify-content-center"> -->
							<h2 class="card-title text-white">Upload</h2>
							<!-- </div> -->
						</div>
						<div class="card-body d-flex justify-content-center">
							<!--<button type="button" class="btn btn-lg btn-primary">
								Upload X-ray Image
							</button>-->
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text" id="inputGroupFileAddon01">Upload</span>
								</div>
								<div class="custom-file">
									<input type="file" class="custom-file-input" id="inputFileToLoad" aria-describedby="inputGroupFileAddon01" onchange="decodeAndSend();" />
									<label class="custom-file-label" for="inputFileToLoad">Choose file</label>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
